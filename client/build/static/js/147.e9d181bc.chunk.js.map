{"version":3,"file":"static/js/147.e9d181bc.chunk.js","mappings":"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","sources":["components/Cart.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useCart } from '../context/CartContext';\r\n\r\nconst Cart: React.FC = () => {\r\n  const { cart, removeFromCart, updateQuantity, clearCart } = useCart();\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const handleCheckout = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const checkoutItems = cart.items.map(({ productId, quantity }) => ({ productId, quantity }));\r\n      const res = await fetch('http://localhost:3001/api/create-checkout-session', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ items: checkoutItems }),\r\n      });\r\n      const session = await res.json();\r\n      if (session.free && session.downloadUrl) {\r\n        window.location.href = session.downloadUrl;\r\n        await clearCart();\r\n        return;\r\n      }\r\n      if (session.id) {\r\n        const stripeModule = await import('@stripe/stripe-js');\r\n        const stripe = await stripeModule.loadStripe('pk_test_51RiIvuHIOERYAOnI6YsstgEaBYWoF6LJkat0sJI3LHPN3cdsXBhgAcTtF3HMe7R7pAliSkNoDCyOrv1jPUvD0q0h0073rs3DjP');\r\n        await stripe?.redirectToCheckout({ sessionId: session.id });\r\n        await clearCart();\r\n      } else {\r\n        setError('Failed to start payment.');\r\n      }\r\n    } catch (err: any) {\r\n      setError(err.message || 'Checkout failed.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (cart.items.length === 0) {\r\n    return (\r\n      <div className=\"p-12 text-center text-gray-400 text-2xl font-semibold bg-white rounded-2xl mt-10 shadow-md\">\r\n        Your cart is empty.\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-2xl mx-auto mt-12 bg-white rounded-3xl shadow-xl p-8 md:p-12 min-h-[340px]\">\r\n      <h2 className=\"text-3xl md:text-4xl font-extrabold mb-8 text-center text-indigo-900 tracking-tight drop-shadow\">Your Cart</h2>\r\n      <ul className=\"divide-y divide-gray-200 mb-8\">\r\n        {cart.items.map(item => (\r\n          <li key={item.productId} className=\"flex flex-col md:flex-row items-center gap-4 py-5\">\r\n            {item.image && (\r\n              <img src={item.image} alt={item.name} className=\"w-16 h-16 object-cover rounded-xl shadow-sm border border-gray-100\" />\r\n            )}\r\n            <div className=\"flex-1 w-full flex flex-col md:flex-row md:items-center gap-2 md:gap-0\">\r\n              <div className=\"flex-1\">\r\n                <div className=\"font-bold text-lg text-indigo-700 mb-1 hover:underline cursor-pointer\">{item.name}</div>\r\n                <div className=\"text-gray-500 text-base font-medium\">₹{item.price}</div>\r\n              </div>\r\n              <div className=\"flex items-center gap-2 mt-2 md:mt-0\">\r\n                <input\r\n                  type=\"number\"\r\n                  min={1}\r\n                  value={item.quantity}\r\n                  onChange={e => updateQuantity(item.productId, Math.max(1, Number(e.target.value)))}\r\n                  className=\"w-14 border border-gray-300 rounded-lg px-2 py-1 font-semibold text-base text-center bg-gray-50 focus:outline-none focus:ring-2 focus:ring-cyan-400\"\r\n                />\r\n                <button\r\n                  onClick={() => removeFromCart(item.productId)}\r\n                  className=\"ml-2 text-pink-600 font-bold text-base hover:underline hover:text-pink-700 transition-colors\"\r\n                >\r\n                  Remove\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      <div className=\"flex flex-col md:flex-row md:items-center md:justify-between mb-8\">\r\n        <div></div>\r\n        <div className=\"text-xl md:text-2xl font-extrabold text-indigo-900 text-right\">Total: ₹{cart.items.reduce((sum, i) => sum + i.price * i.quantity, 0)}</div>\r\n      </div>\r\n      {error && <div className=\"text-red-500 mb-4 text-center font-semibold\">{error}</div>}\r\n      <div className=\"flex flex-col md:flex-row justify-center gap-6\">\r\n        <button\r\n          onClick={handleCheckout}\r\n          className=\"bg-gradient-to-r from-cyan-400 to-blue-500 hover:from-cyan-500 hover:to-blue-600 text-white font-extrabold rounded-xl px-10 py-4 text-lg shadow-lg transition-all duration-150 disabled:opacity-60 disabled:cursor-not-allowed\"\r\n          disabled={loading}\r\n        >\r\n          {loading ? 'Processing...' : 'Checkout'}\r\n        </button>\r\n        <button\r\n          onClick={clearCart}\r\n          className=\"bg-gray-100 hover:bg-gray-200 text-indigo-900 font-bold rounded-xl px-10 py-4 text-lg shadow-md transition-all duration-150\"\r\n        >\r\n          Clear Cart\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n"],"names":["Cart","cart","removeFromCart","updateQuantity","clearCart","useCart","loading","setLoading","useState","error","setError","items","length","_jsx","className","children","_jsxs","map","item","image","src","alt","name","price","type","min","value","quantity","onChange","e","productId","Math","max","Number","target","onClick","reduce","sum","i","async","checkoutItems","_ref","res","fetch","method","headers","body","JSON","stringify","session","json","free","downloadUrl","window","location","href","id","stripeModule","stripe","loadStripe","redirectToCheckout","sessionId","err","message","disabled"],"sourceRoot":""}