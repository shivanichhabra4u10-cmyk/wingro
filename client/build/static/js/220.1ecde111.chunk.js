"use strict";(self.webpackChunkwingrox_ai_client=self.webpackChunkwingrox_ai_client||[]).push([[220],{3220:(e,t,o)=>{o.r(t),o.d(t,{default:()=>u});var n=o(5043),s=o(3216),a=o(5475),i=o(899),r=o(3504),l=o(6625),d=o(579);const c=i.Ik().shape({email:i.Yj().email("Invalid email address").required("Email is required"),password:i.Yj().min(6,"Password must be at least 6 characters").required("Password is required")}),u=()=>{const[e,t]=(0,n.useState)(!1),[o,i]=(0,n.useState)(""),[u,m]=(0,n.useState)(!1),[g,h]=(0,n.useState)(""),[p,f]=(0,n.useState)(!1),[x,y]=(0,n.useState)(""),[b,w]=(0,n.useState)(!1),[j,N]=(0,n.useState)(""),[S,k]=(0,n.useState)(""),[v,C]=(0,n.useState)(!1),{login:O}=(0,l.A)(),P=(0,s.Zp)(),T=(0,s.zy)(),[_,E]=(0,n.useState)(!1),[L,I]=(0,n.useState)(!0),[G,q]=(0,n.useState)("");return(0,d.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center pt-12",children:(0,d.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md bg-white rounded-xl shadow-lg p-8",children:[(0,d.jsx)("h2",{className:"text-center text-3xl font-extrabold text-blue-900 mb-2",children:"Sign in to your account"}),(0,d.jsxs)("p",{className:"text-center text-sm text-gray-600 mb-6",children:["Or"," ",(0,d.jsx)(a.N_,{to:"/register",className:"font-medium text-cyan-600 hover:text-cyan-500",children:"create a new account"})]}),p||e?e?(0,d.jsxs)("div",{className:"mt-6",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter your email to reset password"}),(0,d.jsx)("input",{type:"email",value:o,onChange:e=>i(e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 mb-2 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"you@example.com"}),(0,d.jsx)("button",{type:"button",className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium bg-white text-gray-800 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition",onClick:async()=>{m(!0),h("");try{const e=await fetch("http://localhost:3001/api/auth/request-password-reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:o})});if(e.ok)h("If this email exists, a reset link will be sent.");else{const t=await e.json();h(t.error||"Failed to send reset link.")}}catch(e){h("Network error. Please try again.")}m(!1)},disabled:u||!o,children:u?"Sending...":"Send Reset Link"}),(0,d.jsx)("button",{type:"button",className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium bg-white text-gray-800 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition mt-2",onClick:()=>{t(!1),i(""),h("")},children:"Back to Login"}),g&&(0,d.jsx)("div",{className:"mt-2 text-green-600 text-center",children:g})]}):(0,d.jsxs)("div",{className:"mt-6",children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),(0,d.jsx)("input",{type:"tel",value:x,onChange:e=>y(e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 mb-2 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter your phone number"}),b?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2 mt-4",children:"Enter OTP"}),(0,d.jsx)("input",{type:"text",value:j,onChange:e=>N(e.target.value),className:"w-full border border-gray-300 rounded-lg px-4 py-2 mb-2 focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter OTP code"}),(0,d.jsx)("button",{type:"button",className:"w-full bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg shadow hover:bg-indigo-700 transition",onClick:async()=>{C(!0),k("");const e=await fetch("/api/auth/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:x,otp:j})}),t=await e.json();e.ok?window.location.reload():k(t.error||"Invalid OTP"),C(!1)},disabled:v||!j,children:v?"Verifying...":"Verify OTP & Login"}),(0,d.jsx)("button",{type:"button",className:"w-full mt-2 text-indigo-600 hover:underline",onClick:()=>{f(!1),y(""),w(!1),N(""),k("")},children:"Back to Email/Password Login"})]}):(0,d.jsx)("button",{type:"button",className:"w-full bg-indigo-600 text-white font-bold py-2 px-4 rounded-lg shadow hover:bg-indigo-700 transition",onClick:async()=>{C(!0),k("");const e=await fetch("/api/auth/send-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:x})}),t=await e.json();e.ok?w(!0):k(t.error||"Failed to send OTP"),C(!1)},disabled:v||!x,children:v?"Sending OTP...":"Send OTP"}),S&&(0,d.jsx)("div",{className:"mt-2 text-red-600 text-center",children:S})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(r._H,{initialValues:{email:"",password:""},validationSchema:c,onSubmit:async e=>{await O(e.email,e.password);const t=T.state&&T.state.from?T.state.from:"/";P(t)},submitButton:{text:"Sign in",props:{className:"w-full",variant:"primary"}},children:[(0,d.jsx)(r.zB,{label:"Email address",name:"email",type:"email",autoComplete:"email"}),(0,d.jsx)(r.zB,{label:"Password",name:"password",type:"password",autoComplete:"current-password"}),(0,d.jsx)("div",{className:"w-full flex justify-end mt-1",children:(0,d.jsx)("span",{className:"text-xs text-gray-400 hover:text-cyan-600 cursor-pointer underline",onClick:()=>t(!0),role:"link",children:"Forgot password?"})})]}),(0,d.jsxs)("div",{className:"mt-6 flex flex-col gap-2 items-center",children:[(0,d.jsx)("button",{type:"button",className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium bg-white text-gray-800 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition",onClick:async()=>{if(L)window.location.href=`https://accounts.google.com/o/oauth2/v2/auth?${new URLSearchParams({client_id:"YOUR_GOOGLE_CLIENT_ID",redirect_uri:"http://localhost:3001/auth/google/callback",response_type:"token",scope:"openid email profile",prompt:"select_account"}).toString()}`;else{let e=G;e||(e=window.prompt("Paste test Google ID token here")||"",q(e));const t=window.prompt("Enter phone (optional, for first time)");fetch("http://localhost:5000/api/auth/login/google",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({token:e,phone:t})}).then(e=>e.json()).then(e=>{alert("Google login successful!"),window.location.reload()}).catch(()=>alert("Google login failed"))}},children:"Sign in with Google"}),(0,d.jsx)("button",{type:"button",className:"w-full flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium bg-white text-gray-800 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition",onClick:()=>f(!0),children:"Login with OTP"})]})]})]})})}}}]);
//# sourceMappingURL=220.1ecde111.chunk.js.map