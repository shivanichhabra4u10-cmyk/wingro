"use strict";(self.webpackChunkwingrox_ai_client=self.webpackChunkwingrox_ai_client||[]).push([[255],{386:(e,t,r)=>{r.d(t,{G:()=>p});var a=r(6291),s=r(6628);const o={uploadFile:s.QM,getFileUrl:async e=>s.b4(e),listFiles:async e=>{const{data:t,error:r}=await s.ND.storage.from("grow").list(e,{limit:1e3,offset:0,sortBy:{column:"name",order:"asc"}});if(r)throw r;if(!t)return[];const a=(e,t)=>{let r=[];for(const s of e)s.id?r.push(t?`${t}/${s.name}`:s.name):s.name&&s.items&&(r=r.concat(a(s.items,t?`${t}/${s.name}`:s.name)));return r};return a(t,e)}},l=new class{constructor(e){this.provider=void 0,this.provider=e}setProvider(e){this.provider=e}async uploadFile(e,t){return this.provider.uploadFile(e,t)}async getFileUrl(e){return this.provider.getFileUrl(e)}async listFiles(e){return this.provider.listFiles(e)}}(o);let i=function(e){return e.PDF="pdf",e.VIDEO="video",e.PRESENTATION="presentation",e.EXCEL="excel",e.IMAGE="image",e.OTHER="other",e}({});async function n(e,t){const r=`products/${t}/${e.name}`;await async function(e,t){return l.uploadFile(e,t)}(e,r);const a=await async function(e){return l.getFileUrl(e)}(r);return{fileId:r,originalName:e.name,fileType:c(e.name),url:a,size:e.size,uploadDate:(new Date).toISOString(),metadata:{},thumbnailUrl:void 0}}function c(e){var t;if(!e||"string"!==typeof e||!e.includes("."))return i.OTHER;switch(null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase()){case"pdf":return i.PDF;case"mp4":case"mov":case"avi":return i.VIDEO;case"ppt":case"pptx":return i.PRESENTATION;case"xls":case"xlsx":return i.EXCEL;case"jpg":case"jpeg":case"png":case"gif":return i.IMAGE;default:return i.OTHER}}var d=r(6213);const u=d.A.create({baseURL:"http://localhost:3001",headers:{"Content-Type":"application/json"}}),p={getAll:async e=>{try{return(await a.ZE.getAll(e)).data}catch(t){throw console.error("Error fetching products:",t),t}},getById:async e=>{try{return(await a.ZE.getById(e)).data}catch(t){throw console.error(`Error fetching product ${e}:`,t),t}},create:async(e,t)=>{try{var r;const o=await a.ZE.create(e);console.log("Product create API response:",o);const l=(null===(r=o.data)||void 0===r?void 0:r.data)||o.data;if(!l||!l._id)throw new Error("Product creation response missing _id. Full response: "+JSON.stringify(o));const i=l._id;if(t&&t.length>0)try{const e=await g(t,i),r={...l,files:e,hasFiles:!0},s=await a.ZE.update(i,r);if(console.log("Product update with files response:",s),!s.data||!Array.isArray(s.data.files)||0===s.data.files.length)throw new Error("Product update succeeded but files array is missing or empty.");return s.data}catch(s){throw console.error("Error updating product with files:",s),s}else if(!l.files){return(await a.ZE.update(i,{...l,files:[]})).data}return o.data}catch(o){throw console.error("Error creating product:",o),o}},update:async(e,t,r,s)=>{try{console.log("[productsApiWithFiles.update] START",{id:e,productData:t,files:r,filesToDelete:s}),s&&s.length>0&&await Promise.all(s.map(e=>Promise.resolve()));let l=[];if(r&&r.length>0){l=await g(r,e);const a=t.files||[];t.files=[...a,...l],t.hasFiles=!0}else if(!t.files){var o;const r=await a.ZE.getById(e);t.files=(null===(o=r.data)||void 0===o?void 0:o.files)||[]}console.log("[productsApiWithFiles.update] before API call",{id:e,productData:t});const i=await a.ZE.update(e,t);return console.log("[productsApiWithFiles.update] after API call",{response:i}),i.data}catch(l){throw console.error(`Error updating product ${e}:`,l),l}},delete:async e=>{try{const t=(await u.get(`/api/products/${e}`)).data.data;t.files&&Array.isArray(t.files)&&t.files.length>0&&await Promise.all(t.files.map(e=>Promise.resolve()));return(await u.delete(`/api/products/${e}`)).data}catch(t){throw console.error(`Error deleting product ${e}:`,t),t}},uploadFile:async(e,t,r)=>{try{const r=await n(t,e),a=(await u.get(`/api/products/${e}`)).data.data,s=a.files||[];s.push(r);const o={...a,files:s,hasFiles:!0};return{file:r,product:(await u.put(`/api/products/${e}`,o)).data.data}}catch(a){throw console.error(`Error uploading file for product ${e}:`,a),a}},deleteFile:async(e,t)=>{try{const r=(await d.A.get(`/api/products/${e}`)).data.data,a=(r.files||[]).filter(e=>e.fileId!==t),s={...r,files:a,hasFiles:a.length>0};return(await d.A.put(`/api/products/${e}`,s)).data}catch(r){throw console.error(`Error deleting file ${t} for product ${e}:`,r),r}},getFiles:async e=>{try{return(await a.ZE.getById(e)).data.data.files||[]}catch(t){throw console.error(`Error getting files for product ${e}:`,t),t}},purchase:async e=>Promise.resolve({success:!0}),getDownloadUrl:async(e,t)=>null};async function g(e,t){if(e.filter(e=>!e||!e.name||"string"!==typeof e.name||""===e.name.trim()).length>0)throw new Error("One or more files are missing a valid name. Please re-select your files and try again.");const r=e.map(e=>n(e,t));return await Promise.all(r)}},6628:(e,t,r)=>{r.d(t,{ND:()=>a,QM:()=>s,b4:()=>o});const a=(0,r(3399).UU)("https://dwyijlkavzfiyffslqkd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR3eWlqbGthdnpmaXlmZnNscWtkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE2MzMzNjAsImV4cCI6MjA2NzIwOTM2MH0.rT-2J1mfqP8sKqAT7K44TXMmISTbyTdC_Z3VxFXGPZ8");async function s(e,t){const{data:r,error:s}=await a.storage.from("grow").upload(t,e,{upsert:!0});if(s)throw s;return r}function o(e){return a.storage.from("grow").getPublicUrl(e).data.publicUrl}},7255:(e,t,r)=>{r.r(t),r.d(t,{default:()=>l});var a=r(5043),s=r(386),o=r(579);const l=()=>{const[e,t]=(0,a.useState)([]),[r,l]=(0,a.useState)(!0),[i,n]=(0,a.useState)(null),[c,d]=(0,a.useState)(""),[u,p]=(0,a.useState)(""),[g,f]=(0,a.useState)(""),m=e=>e.charAt(0).toUpperCase()+e.slice(1),h=Array.from(new Set(e.map(e=>e.category).filter(Boolean))),x=Array.from(new Set(e.map(e=>e.productType).filter(Boolean))),[y,w]=(0,a.useState)(""),[b,v]=(0,a.useState)("");return(0,a.useEffect)(()=>{(async()=>{try{l(!0),n(null);const e=await s.G.getAll();console.log("Products API response:",e),Array.isArray(e)?t(e):Array.isArray(e.data)?t(e.data):e.products&&Array.isArray(e.products)?t(e.products):t([])}catch(e){console.error("Products API error:",e),n("Failed to fetch products")}finally{l(!1)}})()},[]),(0,o.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-blue-100",children:[(0,o.jsxs)("section",{className:"bg-gradient-to-r from-blue-900 to-indigo-800 rounded-xl p-8 md:p-12 text-white relative overflow-hidden mb-8 shadow-lg",children:[(0,o.jsxs)("div",{className:"relative z-10 max-w-3xl mx-auto text-center",children:[(0,o.jsx)("h1",{className:"text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-200 to-cyan-400 mb-4 tracking-tight",style:{fontFamily:"Inter, sans-serif",letterSpacing:"-0.02em"},children:"Explore Our Products"}),(0,o.jsx)("p",{className:"text-xl text-blue-100 mb-6",children:"Discover innovative tools and resources designed to accelerate your growth journey."})]}),(0,o.jsx)("div",{className:"absolute -top-24 -right-24 w-64 h-64 rounded-full bg-gradient-to-br from-blue-500/30 to-cyan-500/30 blur-3xl"}),(0,o.jsx)("div",{className:"absolute -bottom-16 -left-16 w-48 h-48 rounded-full bg-gradient-to-tr from-indigo-500/20 to-purple-500/20 blur-3xl"})]}),(0,o.jsxs)("div",{className:"container mx-auto px-4 pb-16",children:[(0,o.jsx)("div",{className:"bg-white rounded-xl shadow p-6 mb-8 flex flex-col md:flex-row md:items-end gap-4",children:(0,o.jsxs)("div",{className:"flex-1 flex flex-col md:flex-row gap-4",children:[(0,o.jsx)("input",{type:"text",placeholder:"Search products...",value:c,onChange:e=>d(e.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 w-full md:w-64 focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,o.jsxs)("select",{value:u,onChange:e=>p(e.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 w-full md:w-48 focus:outline-none focus:ring-2 focus:ring-blue-400",children:[(0,o.jsx)("option",{value:"",children:"All Categories"}),h.map(e=>(0,o.jsx)("option",{value:e,children:m(e)},e))]}),(0,o.jsxs)("select",{value:g,onChange:e=>f(e.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 w-full md:w-48 focus:outline-none focus:ring-2 focus:ring-blue-400",children:[(0,o.jsx)("option",{value:"",children:"All Types"}),x.map(e=>(0,o.jsx)("option",{value:e,children:m(e)},e))]}),(0,o.jsx)("input",{type:"number",placeholder:"Min Price",value:y,onChange:e=>w(e.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 w-full md:w-32 focus:outline-none focus:ring-2 focus:ring-blue-400",min:0}),(0,o.jsx)("input",{type:"number",placeholder:"Max Price",value:b,onChange:e=>v(e.target.value),className:"border border-gray-300 rounded-lg px-4 py-2 w-full md:w-32 focus:outline-none focus:ring-2 focus:ring-blue-400",min:0})]})}),r?(0,o.jsx)("div",{className:"text-center py-12 text-xl text-blue-700",children:"Loading products..."}):i?(0,o.jsx)("div",{className:"text-center py-12 text-xl text-red-600",children:i}):0===e.length?(0,o.jsx)("div",{className:"text-center py-12 text-xl text-gray-500",children:"No products available at the moment."}):(0,o.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:e.filter(e=>!(c&&!e.name.toLowerCase().includes(c.toLowerCase()))&&((!u||e.category===u)&&((!g||e.productType===g)&&(!(y&&e.price<Number(y))&&!(b&&e.price>Number(b)))))).map(e=>{const t="number"===typeof e.oldPrice&&e.oldPrice>e.price,r=t&&e.oldPrice?Math.round(100*(e.oldPrice-e.price)/e.oldPrice):0,a=e.images&&e.images.length>0?e.images[0]:"https://via.placeholder.com/300x200?text=Product",s=Math.floor(200*Math.random()+20);return(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow border border-gray-200 flex flex-col transition-transform hover:-translate-y-1 hover:shadow-xl hover:border-blue-300 overflow-hidden",children:[(0,o.jsxs)("div",{className:"relative w-full aspect-[4/3] bg-gray-100",children:[(0,o.jsx)("img",{src:a,alt:e.name,className:"object-cover w-full h-full rounded-t-xl"}),(0,o.jsx)("button",{className:"absolute top-2 right-2 bg-white/80 rounded-full p-2 shadow hover:bg-pink-100 transition",title:"Wishlist",children:(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-pink-500",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.54 0-2.877.792-3.562 2.008C11.565 4.542 10.228 3.75 8.688 3.75 6.099 3.75 4 5.765 4 8.25c0 7.22 8 11.25 8 11.25s8-4.03 8-11.25z"})})})]}),(0,o.jsxs)("div",{className:"p-4 flex flex-col flex-1",children:[(0,o.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,o.jsx)("span",{className:"text-sm font-semibold text-gray-900 truncate",children:e.name})}),(0,o.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,o.jsx)("span",{className:"text-xs text-gray-500 truncate",children:e.category||e.productType||"Product"})}),(0,o.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,o.jsxs)("span",{className:"text-base font-bold text-gray-900",children:["Rs. ",e.price.toLocaleString()]}),t&&e.oldPrice&&(0,o.jsxs)("span",{className:"text-gray-400 line-through text-sm",children:["Rs. ",e.oldPrice.toLocaleString()]}),t&&(0,o.jsxs)("span",{className:"text-xs font-semibold text-green-700 bg-green-100 rounded px-2 py-0.5",children:[r,"% OFF"]})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,o.jsxs)("span",{className:"text-xs font-semibold text-white bg-blue-600 rounded px-2 py-0.5",children:[4.3.toFixed(1)," \u2605"]}),(0,o.jsx)("span",{className:"text-xs text-gray-500",children:s})]}),(0,o.jsx)("div",{className:"mt-auto flex flex-col items-center w-full",children:(0,o.jsx)("a",{href:e._id||e.id?`/product/${e._id||e.id}`:"#",className:"w-full px-4 py-2 rounded bg-blue-500 text-white font-semibold shadow hover:bg-blue-600 transition text-center",onClick:t=>{e._id||e.id||(t.preventDefault(),alert("Product ID missing."))},children:"Download"})})]})]},e._id)})})]})]})}}}]);
//# sourceMappingURL=255.a2906737.chunk.js.map