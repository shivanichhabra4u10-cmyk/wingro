{"version":3,"file":"static/js/29.33385129.chunk.js","mappings":"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","sources":["pages/ProductDetail.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams, useLocation, useNavigate } from 'react-router-dom';\r\nimport { useCart } from '../context/CartContext';\r\n\r\ninterface Product {\r\n  _id: string;\r\n  name: string;\r\n  description: string;\r\n  price: number;\r\n  images: string[];\r\n  features?: string[];\r\n  author?: string;\r\n  fileType?: string;\r\n  fileSize?: string;\r\n  pages?: number;\r\n  compatibility?: string[];\r\n  downloads?: number;\r\n  rating?: number;\r\n  reviews?: Array<{ user: string; rating: number; comment: string; }>;\r\n  seller?: {\r\n    name: string;\r\n    avatar?: string;\r\n    rating?: number;\r\n    sales?: number;\r\n    shopLink?: string;\r\n  };\r\n  [key: string]: any;\r\n}\r\n\r\nconst ProductDetail: React.FC = () => {\r\n  const { id } = useParams<{ id: string }>();\r\n  const location = useLocation();\r\n  const { addToCart } = useCart();\r\n  const navigate = useNavigate();\r\n  const [product, setProduct] = useState<Product | null>(() => {\r\n    // Use product from navigation state if available\r\n    // @ts-ignore\r\n    return location.state && location.state.product ? location.state.product : null;\r\n  });\r\n  const [loading, setLoading] = useState(product ? false : true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [mainImgIdx, setMainImgIdx] = useState(0);\r\n  const [added, setAdded] = useState(false);\r\n  const [descExpanded, setDescExpanded] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (product) return;\r\n    setLoading(true);\r\n    fetch(`http://localhost:3001/api/products/${id}`)\r\n      .then((res) => {\r\n        if (!res.ok) throw new Error('Product not found');\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        console.log('Fetched product detail:', data);\r\n        let productObj = data;\r\n        if (data && typeof data === 'object') {\r\n          if ('data' in data && typeof data.data === 'object') {\r\n            productObj = data.data;\r\n          }\r\n        }\r\n        if (productObj && !productObj._id && productObj.id) {\r\n          productObj._id = productObj.id;\r\n        }\r\n        if (!productObj || (!productObj._id && !productObj.id)) {\r\n          setError('Product not found or invalid data');\r\n          setProduct(null);\r\n        } else {\r\n          setProduct(productObj);\r\n          setMainImgIdx(0);\r\n        }\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        setError(err.message);\r\n        setLoading(false);\r\n      });\r\n  }, [id, product]);\r\n\r\n  if (loading) return <div className=\"text-center py-10\">Loading...</div>;\r\n  if (error) return <div className=\"text-center text-red-500 py-10\">{error}</div>;\r\n  if (!product) return null;\r\n\r\n  // Helper for file type badge\r\n  const fileTypeBadge = (type?: string) => {\r\n    if (!type) return null;\r\n    let color = 'bg-blue-500';\r\n    if (type.toLowerCase().includes('ppt')) color = 'bg-orange-500';\r\n    if (type.toLowerCase().includes('doc')) color = 'bg-blue-700';\r\n    if (type.toLowerCase().includes('pdf')) color = 'bg-red-500';\r\n    return <span className={`inline-block px-3 py-1 text-xs font-semibold text-white rounded-full ${color}`}>{type.toUpperCase()}</span>;\r\n  };\r\n\r\n  // Helper for star rating\r\n  const renderStars = (rating: number = 5) => {\r\n    return (\r\n      <span className=\"text-yellow-500\">\r\n        {'★'.repeat(Math.round(rating))}\r\n        {'☆'.repeat(5 - Math.round(rating))}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  if (!product) {\r\n    return <div className=\"min-h-screen flex items-center justify-center text-xl\">Loading product...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-b from-blue-50 to-blue-100 pb-16\">\r\n      <div className=\"container mx-auto px-4 pt-8\">\r\n        <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 p-4 md:p-8 flex flex-col md:flex-row gap-8 max-w-5xl mx-auto\">\r\n          {/* Left: Image Carousel */}\r\n          <div className=\"md:w-1/2 w-full flex flex-col items-center\">\r\n            <div className=\"border rounded-xl overflow-hidden relative bg-white shadow-md w-full\">\r\n              <div className=\"absolute top-3 left-3 z-10\">{fileTypeBadge(product?.fileType)}</div>\r\n              {product?.images && product.images.length > 0 ? (\r\n                <img src={product.images[mainImgIdx]} alt={product?.name} className=\"w-full h-64 md:h-96 object-contain bg-white\" />\r\n              ) : (\r\n                <div className=\"w-full h-64 md:h-96 flex flex-col items-center justify-center bg-gray-100 text-gray-400\">\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-20 w-20 mb-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2z\" />\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M16 11a4 4 0 01-8 0\" />\r\n                  </svg>\r\n                  <span className=\"text-lg\">No preview available</span>\r\n                </div>\r\n              )}\r\n              {product?.images && product.images.length > 1 && (\r\n                <>\r\n                  <button className=\"absolute left-2 top-1/2 -translate-y-1/2 bg-gray-800/80 hover:bg-gray-900 text-white rounded-full p-2 shadow transition-colors\" onClick={() => setMainImgIdx(i => (i - 1 + product.images.length) % product.images.length)} aria-label=\"Previous preview\">&lt;</button>\r\n                  <button className=\"absolute right-2 top-1/2 -translate-y-1/2 bg-gray-800/80 hover:bg-gray-900 text-white rounded-full p-2 shadow transition-colors\" onClick={() => setMainImgIdx(i => (i + 1) % product.images.length)} aria-label=\"Next preview\">&gt;</button>\r\n                </>\r\n              )}\r\n            </div>\r\n            {product?.images && product.images.length > 0 && (\r\n              <div className=\"flex gap-2 overflow-x-auto mt-2\">\r\n                {product.images.map((img, idx) => (\r\n                  <img key={idx} src={img} alt={product?.name + ' ' + (idx + 1)} className={`w-16 h-16 object-contain border rounded cursor-pointer bg-white transition-all duration-150 ${mainImgIdx === idx ? 'ring-2 ring-pink-500' : 'opacity-70 hover:opacity-100'}`} onClick={() => setMainImgIdx(idx)} />\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n          {/* Right: Product Info & Actions */}\r\n          <div className=\"md:w-1/2 w-full flex flex-col gap-6 justify-start\">\r\n            <div>\r\n              <h1 className=\"text-3xl font-extrabold text-gray-900 mb-2\">{product?.name}</h1>\r\n              <p className=\"text-lg text-gray-600 mb-4\">{product?.description}</p>\r\n              <div className=\"flex items-center gap-2 text-sm text-gray-500 mb-2\">\r\n                {product?.seller && product.seller.avatar && <img src={product.seller.avatar} alt={product.seller.name} className=\"w-6 h-6 rounded-full\" />}\r\n                <span>by {product?.seller?.name || product?.author || 'Seller'}</span>\r\n                {product?.seller && product.seller.shopLink && <a href={product.seller.shopLink} className=\"text-indigo-600 hover:underline ml-1\">Shop</a>}\r\n                <span className=\"ml-2 flex items-center gap-1\">{renderStars(product?.seller?.rating || product?.rating || 4.8)}<span>({product?.seller?.sales || 120} sales)</span></span>\r\n              </div>\r\n              <div className=\"flex items-center gap-3 mb-1\">\r\n                <span className=\"text-2xl text-pink-600 font-semibold\">₹{product?.price}</span>\r\n                {product?.originalPrice && product.originalPrice > product.price && (\r\n                  <span className=\"text-gray-400 line-through text-lg\">₹{product?.originalPrice}</span>\r\n                )}\r\n                {product?.originalPrice && product.originalPrice > product.price && (\r\n                  <span className=\"text-green-600 text-sm font-bold\">{Math.round(100 * (product.originalPrice - product.price) / product.originalPrice)}% OFF</span>\r\n                )}\r\n                <span className=\"ml-2 inline-block bg-green-100 text-green-700 text-xs font-semibold px-2 py-1 rounded\">Digital Download</span>\r\n              </div>\r\n            </div>\r\n            {/* ...existing code for actions, reviews, etc... */}\r\n            <div className=\"flex gap-4 mb-2 justify-center md:justify-start\">\r\n              <button className={`bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-3 rounded-lg transition-all text-lg shadow-md w-40 ${added ? 'opacity-60 cursor-not-allowed' : ''}`} onClick={() => { if (!product) return; if (!product._id && !(product as any).id) { alert('This product cannot be added to cart (missing product ID).'); return; } const productId = product._id || (product as any).id; if (!productId) { alert('This product cannot be added to cart (missing product ID).'); return; } addToCart({ productId, name: product.name, price: product.price, quantity: 1, image: product.images?.[0] || '', }); setAdded(true); setTimeout(() => setAdded(false), 1200); }} disabled={added}>{added ? 'Added!' : 'Add to cart'}</button>\r\n              <button className=\"bg-indigo-700 hover:bg-indigo-800 text-white font-bold py-3 rounded-lg transition-all text-lg shadow-md w-40\" onClick={() => navigate('/cart')}>Buy now</button>\r\n              <button className=\"ml-2 p-3 rounded-full border border-gray-200 hover:bg-gray-100\" title=\"Add to wishlist\"><svg className=\"w-5 h-5 text-pink-500\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M4.318 6.318a4.5 4.5 0 016.364 0L12 7.636l1.318-1.318a4.5 4.5 0 116.364 6.364L12 21.364l-7.682-7.682a4.5 4.5 0 010-6.364z\" /></svg></button>\r\n            </div>\r\n            <div className=\"flex flex-wrap gap-3 text-xs text-gray-600 justify-center md:justify-start\">\r\n              <span className=\"inline-flex items-center gap-1\"><svg className=\"w-4 h-4 text-green-500\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M5 13l4 4L19 7\" /></svg> Instant download</span>\r\n              <span className=\"inline-flex items-center gap-1\"><svg className=\"w-4 h-4 text-blue-500\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\" viewBox=\"0 0 24 24\"><circle cx=\"12\" cy=\"12\" r=\"10\" /><path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M8 12l2 2 4-4\" /></svg> Secure payment</span>\r\n            </div>\r\n            <div className=\"bg-gray-50 rounded-lg p-4 flex flex-col gap-2 text-sm mt-4\">\r\n              <div className=\"flex gap-4 flex-wrap\">\r\n                {product.fileType && <span><b>File type:</b> {product.fileType}</span>}\r\n                {product.fileSize && <span><b>File size:</b> {product.fileSize}</span>}\r\n                {product.pages && <span><b>Pages/slides:</b> {product.pages}</span>}\r\n                {product.compatibility && product.compatibility.length > 0 && <span><b>Compatible with:</b> {product.compatibility.join(', ')}</span>}\r\n                {product.downloads && <span><b>Downloads:</b> {product.downloads}</span>}\r\n              </div>\r\n              <div><b>License:</b> Personal & commercial use</div>\r\n              <div><b>Delivery:</b> Instant digital download</div>\r\n            </div>\r\n            <div className=\"text-gray-700 mb-2 whitespace-pre-line mt-4\">\r\n              {descExpanded || (product.description && product.description.length < 300) ? product.description : product.description?.slice(0, 300) + '...'}\r\n              {product.description && product.description.length > 300 && (<button className=\"ml-2 text-indigo-600 hover:underline text-xs\" onClick={() => setDescExpanded(e => !e)}>{descExpanded ? 'Show less' : 'Read more'}</button>)}\r\n            </div>\r\n            {product.features && product.features.length > 0 && (<ul className=\"list-disc pl-5 mb-2\">{product.features.map((feature, idx) => (<li key={idx} className=\"text-gray-600\">{feature}</li>))}</ul>)}\r\n            {/* Downloadable Files removed for digital product privacy */}\r\n            {/* Seller Info */}\r\n            <div className=\"flex items-center gap-3 bg-white border rounded-lg p-3 mt-2 justify-center md:justify-start\">\r\n              {product.seller?.avatar && <img src={product.seller.avatar} alt={product.seller.name} className=\"w-10 h-10 rounded-full\" />}\r\n              <div>\r\n                <div className=\"font-semibold\">{product.seller?.name || product.author || 'Seller'}</div>\r\n                <div className=\"text-xs text-gray-500\">{renderStars(product.seller?.rating || 4.8)} {product.seller?.sales || 120} sales</div>\r\n                {product.seller?.shopLink && <a href={product.seller.shopLink} className=\"text-indigo-600 hover:underline text-xs\">Visit shop</a>}\r\n              </div>\r\n            </div>\r\n            {/* Reviews */}\r\n            <div className=\"mt-2\">\r\n              <div className=\"flex items-center gap-2 mb-1 justify-center md:justify-start\">\r\n                <span className=\"text-yellow-500 text-lg\">★</span>\r\n                <span className=\"font-semibold\">{product.rating || 4.8}</span>\r\n                <span className=\"text-gray-500 text-sm\">({product.reviews ? product.reviews.length : 120} reviews)</span>\r\n              </div>\r\n              <div className=\"max-h-32 overflow-y-auto space-y-2\">\r\n                {product.reviews && product.reviews.length > 0 ? (product.reviews.slice(0, 3).map((r, idx) => (<div key={idx} className=\"bg-white rounded p-2 border\"><div className=\"flex items-center gap-2 mb-1\"><span className=\"font-bold text-gray-700\">{r.user}</span><span className=\"text-yellow-500\">{'★'.repeat(r.rating)}</span></div><div className=\"text-gray-600 text-sm\">{r.comment}</div></div>))) : (<div className=\"text-gray-400 text-sm\">No reviews yet.</div>)}\r\n              </div>\r\n            </div>\r\n            {/* Related Products (placeholder) */}\r\n            <div className=\"mt-4\">\r\n              <div className=\"font-semibold mb-2\">You may also like</div>\r\n              <div className=\"flex gap-3 overflow-x-auto pb-2\">\r\n                {/* Placeholder for related products */}\r\n                <div className=\"w-32 h-32 bg-gray-100 rounded flex items-center justify-center text-gray-400 text-xs\">Related 1</div>\r\n                <div className=\"w-32 h-32 bg-gray-100 rounded flex items-center justify-center text-gray-400 text-xs\">Related 2</div>\r\n                <div className=\"w-32 h-32 bg-gray-100 rounded flex items-center justify-center text-gray-400 text-xs\">Related 3</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductDetail;\r\n"],"names":["ProductDetail","_product$seller","_product$seller2","_product$seller3","_product$description","_product$seller4","_product$seller5","_product$seller6","_product$seller7","_product$seller8","id","useParams","location","useLocation","addToCart","useCart","navigate","useNavigate","product","setProduct","useState","state","loading","setLoading","error","setError","mainImgIdx","setMainImgIdx","added","setAdded","descExpanded","setDescExpanded","useEffect","fetch","then","res","ok","Error","json","data","console","log","productObj","_id","catch","err","message","_jsx","className","children","renderStars","rating","arguments","length","undefined","_jsxs","repeat","Math","round","type","color","toLowerCase","includes","toUpperCase","fileTypeBadge","fileType","images","src","alt","name","xmlns","fill","viewBox","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","_Fragment","onClick","i","map","img","idx","description","seller","avatar","author","shopLink","href","sales","price","originalPrice","_product$images","alert","productId","quantity","image","setTimeout","disabled","title","cx","cy","r","fileSize","pages","compatibility","join","downloads","slice","e","features","feature","reviews","user","comment"],"sourceRoot":""}